(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(1),c=n(15),o=n.n(c),a=n(3),i=n(4),u=n.n(i),l="/api/persons",j=function(){return u.a.get(l).then((function(e){return e.data}))},d=function(e){return u.a.post(l,e).then((function(e){return e.data}))},b=function(e,t){return u.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return u.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.person,n=(e.setPersons,e.setDisplayPeople),r=e.displayPeople,c=e.setErrorMsg;return Object(s.jsxs)("div",{children:[t.name," ",t.number," ",Object(s.jsx)("button",{onClick:function(){var e=window.confirm("delete?");console.log(t),e&&f(t.id).then((function(e){console.log(e),n(r.filter((function(e){return e.id!==t.id})))})).catch((function(e){c("already removed!"),setTimeout((function(){c(null)}),5e3)}))},children:"delete"})]})},m=n(16),O=function(e){var t=e.filterName,n=e.persons,r=e.setfilterName,c=e.setDisplayPeople;return Object(s.jsx)("div",{children:Object(s.jsx)("input",{value:t,onChange:function(e){var t=e.target.value.toLowerCase();r(t);var s,o=[],a=Object(m.a)(n);try{for(a.s();!(s=a.n()).done;){var i=s.value;i.name.toLowerCase().includes(t)&&o.push(i)}}catch(u){a.e(u)}finally{a.f()}console.log("new people is",o),o.length>=1?c(o):c(n)}})})},h=function(e){var t=e.newName,n=e.newNumber,r=e.setNewName,c=e.setNewNumber,o=e.persons,a=e.setPersons,i=e.setDisplayPeople,u=e.setSuccess,l=function(e,t){return t.find((function(t){return t.name.toLowerCase()===e.toLowerCase()}))};return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("wanna add",t);var s={name:t,number:n};if(l(t,o))if(window.confirm("update number?")){var j=l(t,o).id;b(j,s).then((function(e){var t=o.map((function(t){return t.id!==j?t:e}));a(t),i(t)}))}else alert("cant add same name");else d(s).then((function(e){console.log("added",e),a(o.concat(e)),i(o.concat(e)),u("added ".concat(e.name,"!"))}));r(""),c("")},children:[Object(s.jsx)("h1",{children:"add new name"}),Object(s.jsxs)("div",{children:["name:",Object(s.jsx)("input",{value:t,onChange:function(e){console.log("changin name",e.target.value),r(e.target.value)}})]}),Object(s.jsxs)("div",{children:["phone:",Object(s.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},v=function(e){var t=e.text;return Object(s.jsxs)("div",{children:[" ",Object(s.jsx)("h1",{children:t})]})},x=function(e){var t=e.displayPeople,n=e.setPersons,r=e.setDisplayPeople,c=e.setErrorMsg;return Object(s.jsx)("div",{children:t.map((function(e){return Object(s.jsx)(p,{person:e,setPersons:n,setDisplayPeople:r,displayPeople:t,setErrorMsg:c})}))})},g=function(e){var t=e.msg;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})},w=function(e){var t=e.msg,n=e.setSuccess;return t?(setTimeout((function(){n(null)}),5e3),Object(s.jsx)("div",{className:"green",children:t})):null},N=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(a.a)(o,2),u=i[0],l=i[1],d=Object(r.useState)(""),b=Object(a.a)(d,2),f=b[0],p=b[1],m=Object(r.useState)(""),N=Object(a.a)(m,2),P=N[0],y=N[1],S=Object(r.useState)(n),D=Object(a.a)(S,2),C=D[0],k=D[1],E=Object(r.useState)(null),M=Object(a.a)(E,2),L=M[0],J=M[1],T=Object(r.useState)(""),B=Object(a.a)(T,2),I=B[0],q=B[1];return Object(r.useEffect)((function(){console.log("inside hook"),j().then((function(e){c(e),k(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)(v,{text:"Phonebook"}),Object(s.jsx)(g,{msg:L,setErrorMsg:J}),Object(s.jsx)(w,{msg:I,setSuccess:q}),Object(s.jsx)(O,{filterName:P,persons:n,setDisplayPeople:k,setfilterName:y}),Object(s.jsx)(h,{newName:u,setNewName:l,newNumber:f,setNewNumber:p,persons:n,setPersons:c,setDisplayPeople:k,setSuccess:q}),Object(s.jsx)(v,{text:"Numbers"}),Object(s.jsx)(x,{displayPeople:C,setPersons:c,setDisplayPeople:k,setErrorMsg:J})]})};n(40);o.a.render(Object(s.jsx)(N,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f4b11312.chunk.js.map